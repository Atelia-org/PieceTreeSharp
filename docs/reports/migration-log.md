# Migration Log & Changefeed Checklist

Purpose: capture every PieceTree porting milestone plus its Info-Indexer changefeed delta at `agent-team/indexes/README.md#delta-2025-11-19`, giving AGENTS / Sprints / Task Board editors one audit trail before they update status text.

## How to Append Entries
1. Log the date and Task/Subtask ID exactly as shown on the Task Board.
2. Summarize the delta and cite the concrete files or sections touched using Markdown links (relative paths only).
3. Record the validation evidence (e.g., `dotnet test` command, review notes) and link to the log or README section proving the run.
4. Mark **Changefeed Entry?** = Y only after the update is registered under `agent-team/indexes/README.md#delta-2025-11-19`, and point to that delta inside the Notes column.
5. Future edits to AGENTS / Sprints / Task Board must reference both the relevant row in this table and the matching changefeed entry before saving.

| Date | Task ID | Summary | Key Files | Tests/Validation | Changefeed Entry? (Y/N) | Notes |
| --- | --- | --- | --- | --- | --- | --- |
| 2025-11-19 | PT-003 | Expanded TS↔C# mappings for Piece/PieceTree/SearchContext/BufferRange. | [`agent-team/type-mapping.md`](../../agent-team/type-mapping.md)<br>[`ts/src/vs/editor/common/model/pieceTreeTextBuffer`](../../ts/src/vs/editor/common/model/pieceTreeTextBuffer) | Planner + Info-Indexer review noted in [`agent-team/type-mapping.md`](../../agent-team/type-mapping.md). | Y | Delta recorded at [`agent-team/indexes/README.md#delta-2025-11-19`](../../agent-team/indexes/README.md#delta-2025-11-19); Sprint 00 log cites this row. |
| 2025-11-19 | <a id="pt-004-g1"></a>PT-004.G1 | Wired `PieceTreeBuilder` → `PieceTreeModel` → `PieceTreeBuffer` skeleton with RB helpers. | [`src/TextBuffer/Core`](../../src/TextBuffer/Core)<br>[`src/TextBuffer/README.md#porting-log`](../../src/TextBuffer/README.md#porting-log) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` logged in [`src/TextBuffer/README.md#porting-log`](../../src/TextBuffer/README.md#porting-log). | Y | Changefeed proof at [`agent-team/indexes/README.md#delta-2025-11-19`](../../agent-team/indexes/README.md#delta-2025-11-19); Porting Log cross-references. |
| 2025-11-19 | <a id="pt-005-g1"></a>PT-005.G1 | Established QA matrix + 7 Fact baseline across plain/CRLF/multi-chunk cases. | [`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`tests/TextBuffer.Tests/UnitTest1.cs`](../../tests/TextBuffer.Tests/UnitTest1.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` results archived in [`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md). | Y | QA delta logged under [`agent-team/indexes/README.md#delta-2025-11-19`](../../agent-team/indexes/README.md#delta-2025-11-19) and referenced by the matrix. |
| 2025-11-19 | PT-004.LineInfra | Added `LineStartTable`/`LineStartBuilder`, threaded metadata through `ChunkBuffer`, and introduced `PieceTreeSearchCache` + cache hooks in `PieceTreeModel`. | [`src/TextBuffer/Core/LineStarts.cs`](../../src/TextBuffer/Core/LineStarts.cs)<br>[`src/TextBuffer/Core/ChunkBuffer.cs`](../../src/TextBuffer/Core/ChunkBuffer.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`src/TextBuffer/Core/PieceTreeSearchCache.cs`](../../src/TextBuffer/Core/PieceTreeSearchCache.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (7/7) | N | Awaiting Info-Indexer changefeed entry for the new shims; reference this row plus future delta when updating PT-004 artifacts. |
| 2025-11-19 | PT-004.Positions | Added `TextPosition`, `PieceTreeBuffer.GetPositionAt/GetOffsetAt/GetLineLength/GetLineCharCode/GetCharCode`, and ported TS-inspired offset/position tests. | [`src/TextBuffer/TextPosition.cs`](../../src/TextBuffer/TextPosition.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs)<br>[`tests/TextBuffer.Tests/UnitTest1.cs`](../../tests/TextBuffer.Tests/UnitTest1.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (10/10) | N | Needs Info-Indexer delta for the new prompt + TextPosition additions before task board updates; cite this row when editing PT-004 status. |
| 2025-11-19 | <a id="pt-004-edit"></a>PT-004.Edit | Implemented `PieceTreeModel.Insert/Delete/NodeAt` and `RbDelete` logic; updated `PieceTreeBuffer` to use incremental edits. | [`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (13/13) | N | Awaiting Info-Indexer delta; ported TS tests in `PieceTreeBaseTests.cs`. |
| 2025-11-19 | PT-005.Search | Implemented `PieceTreeSearcher`, `PieceTreeModel.Search.cs` (FindMatches), and `SearchTypes`. Ported basic search tests. | [`src/TextBuffer/Core/PieceTreeSearcher.cs`](../../src/TextBuffer/Core/PieceTreeSearcher.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.Search.cs`](../../src/TextBuffer/Core/PieceTreeModel.Search.cs)<br>[`src/TextBuffer/Core/SearchTypes.cs`](../../src/TextBuffer/Core/SearchTypes.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (16/16) | N | Added `PieceTreeSearchTests.cs`. |
| 2025-11-19 | PT-008.Snapshot | Implemented `PieceTreeSnapshot` and `ITextSnapshot`. Added `CreateSnapshot` to `PieceTreeModel`. | [`src/TextBuffer/Core/PieceTreeSnapshot.cs`](../../src/TextBuffer/Core/PieceTreeSnapshot.cs)<br>[`src/TextBuffer/Core/ITextSnapshot.cs`](../../src/TextBuffer/Core/ITextSnapshot.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (18/18) | N | Added `PieceTreeSnapshotTests.cs`. |
| 2025-11-19 | PT-009.LineOpt | Implemented `_lastVisitedLine` caching in `PieceTreeModel` to optimize sequential line access. | [`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (20/20) | N | Added cache invalidation tests in `PieceTreeBaseTests.cs`. |
| 2025-11-19 | PT-010 | Implemented normalization rebuild via `PieceTreeModel.NormalizeEOL`, `PieceTreeBuilder` BOM/Split-CRLF upgrades, and `_eolNormalized` tracking. | [`src/TextBuffer/Core/ChunkUtilities.cs`](../../src/TextBuffer/Core/ChunkUtilities.cs)<br>[`src/TextBuffer/Core/PieceTreeBuilder.cs`](../../src/TextBuffer/Core/PieceTreeBuilder.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (23/23) | Y | Added `PieceTreeNormalizationTests.cs`. |
| 2025-11-19 | PT-011 | Consolidated PT-004/PT-005. Verified RBTree, Search, Snapshot, Normalization features and 23 passing tests. Updated TestMatrix. | [`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (23/23) | Y | PT-004 and PT-005 marked as Done. |
| 2025-11-19 | TM-001 | Analyzed TextModel/Selection/Cursor TS sources. Updated Type Mapping and created Brief. | [`agent-team/type-mapping.md`](../../agent-team/type-mapping.md)<br>[`agent-team/handoffs/TM-001-Brief.md`](../../agent-team/handoffs/TM-001-Brief.md) | N/A | Y | Phase 2 Kickoff. |
| 2025-11-19 | TM-002/3/4 | Implemented `TextModel`, `Selection`, `Position` (IComparable), and `OnDidChangeContent` events. | [`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`src/TextBuffer/Core/Selection.cs`](../../src/TextBuffer/Core/Selection.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (27/27) | Y | Added `TextModelTests.cs`. |
| 2025-11-19 | TM-005 | Implemented `Cursor` class with basic navigation (Left/Right/Up/Down) and Selection support. | [`src/TextBuffer/Cursor/Cursor.cs`](../../src/TextBuffer/Cursor/Cursor.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (33/33) | Y | Added `CursorTests.cs`. |
| 2025-11-19 | DF-001 | Analyzed Diff/Decoration TS sources. Updated Type Mapping and created Brief. | [`agent-team/type-mapping.md`](../../agent-team/type-mapping.md)<br>[`agent-team/handoffs/DF-001-Brief.md`](../../agent-team/handoffs/DF-001-Brief.md) | N/A | Y | Phase 3 Kickoff. |
| 2025-11-19 | DF-002 | Implemented `DiffComputer` (Myers Algorithm) and `DiffChange`. | [`src/TextBuffer/Diff/DiffComputer.cs`](../../src/TextBuffer/Diff/DiffComputer.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (39/39) | Y | Added `DiffTests.cs`. |
| 2025-11-19 | DF-003/4 | Implemented `IntervalTree` (List-based v1) for Decorations and integrated into `TextModel`. | [`src/TextBuffer/Decorations/IntervalTree.cs`](../../src/TextBuffer/Decorations/IntervalTree.cs)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (47/47) | Y | Added `DecorationTests.cs`. |
| 2025-11-19 | DF-005 | Prototyped `MarkdownRenderer` for DocUI visualization (Cursors/Selections). | [`src/TextBuffer/Rendering/MarkdownRenderer.cs`](../../src/TextBuffer/Rendering/MarkdownRenderer.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (50/50) | Y | Added `MarkdownRendererTests.cs`. |
| 2025-11-19 | AA-001~004 | Audited Core, Model, Search, and Diff/Decorations against TS originals. Identified gaps (Split CRLF, Cache, Word Search, Sticky Cursor). | [`agent-team/handoffs/AA-001-Audit.md`](../../agent-team/handoffs/AA-001-Audit.md)<br>[`agent-team/handoffs/AA-002-Audit.md`](../../agent-team/handoffs/AA-002-Audit.md) | N/A | Y | Phase 4 Kickoff. |
| 2025-11-19 | AA-005 | Fixed Core gaps: Split CRLF handling (Critical) and Search Cache integration. | [`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (53/53) | Y | Added `AA005Tests.cs`. |
| 2025-11-19 | AA-006 | Fixed Feature gaps: Word Search (Classifier) and Sticky Cursor (Column Memory). | [`src/TextBuffer/Core/PieceTreeSearcher.cs`](../../src/TextBuffer/Core/PieceTreeSearcher.cs)<br>[`src/TextBuffer/Cursor/Cursor.cs`](../../src/TextBuffer/Cursor/Cursor.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (56/56) | Y | Added `AA006Tests.cs`. |
| 2025-11-20 | AA2-005 | Restored split CRLF repair, metadata recomputation, search cache invalidation, and piece count tracking with new regression coverage. | [`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/Core/PieceTreeNode.cs`](../../src/TextBuffer/Core/PieceTreeNode.cs)<br>[`src/TextBuffer/Core/PieceTreeSearchCache.cs`](../../src/TextBuffer/Core/PieceTreeSearchCache.cs)<br>[`tests/TextBuffer.Tests/UnitTest1.cs`](../../tests/TextBuffer.Tests/UnitTest1.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (60/60) | Y | Logged under [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20). |
| 2025-11-20 | AA2-005 (Undo/Redo) | Ported the TS undo/redo stack, model option plumbing, and `pushEOL/SetEOL` hooks so C# `TextModel` now mirrors TypeScript semantics. Added resolved options storage, `OnDidChangeOptions/OnDidChangeLanguage` events, and regression tests covering undo slices, stack boundaries, indentation detection, and EOL toggles. | [`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`src/TextBuffer/EditStack.cs`](../../src/TextBuffer/EditStack.cs)<br>[`src/TextBuffer/TextModelOptions.cs`](../../src/TextBuffer/TextModelOptions.cs)<br>[`tests/TextBuffer.Tests/TextModelTests.cs`](../../tests/TextBuffer.Tests/TextModelTests.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (66/66) | Y | Changefeed entry at [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20); Task Board AA2-005 updated to Done. |
| 2025-11-20 | AA2-006 | Completed search/diff/decor parity remediation: Unicode-safe `PieceTreeSearcher` regex captures, diff prettify & move tracking, stickiness-aware decoration interval tree, and Markdown renderer/cursor hooks consuming the new delta events. | [`src/TextBuffer/Core/PieceTreeSearcher.cs`](../../src/TextBuffer/Core/PieceTreeSearcher.cs)<br>[`src/TextBuffer/Diff/DiffComputer.cs`](../../src/TextBuffer/Diff/DiffComputer.cs)<br>[`src/TextBuffer/Decorations/IntervalTree.cs`](../../src/TextBuffer/Decorations/IntervalTree.cs)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`src/TextBuffer/Rendering/MarkdownRenderer.cs`](../../src/TextBuffer/Rendering/MarkdownRenderer.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (71/71) | Y | Logged under [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20); references `PieceTreeSearchTests/DiffTests/DecorationTests/MarkdownRendererTests/TextModelTests`. |
| 2025-11-20 | AA3-003 | Brought C# `TextModel` to TS parity for creation/resolved options, language-configuration + attachment events, undo/redo service integration, and multi-range search scopes. | [`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`src/TextBuffer/TextModelOptions.cs`](../../src/TextBuffer/TextModelOptions.cs)<br>[`src/TextBuffer/EditStack.cs`](../../src/TextBuffer/EditStack.cs)<br>[`src/TextBuffer/TextModelSearch.cs`](../../src/TextBuffer/TextModelSearch.cs)<br>[`src/TextBuffer/Services/ILanguageConfigurationService.cs`](../../src/TextBuffer/Services/ILanguageConfigurationService.cs)<br>[`src/TextBuffer/Services/IUndoRedoService.cs`](../../src/TextBuffer/Services/IUndoRedoService.cs)<br>[`tests/TextBuffer.Tests/TextModelTests.cs`](../../tests/TextBuffer.Tests/TextModelTests.cs)<br>[`tests/TextBuffer.Tests/TextModelSearchTests.cs`](../../tests/TextBuffer.Tests/TextModelSearchTests.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (updated suites incl. TextModel*/Search) | Y | Result logged in [`agent-team/handoffs/AA3-003-Result.md`](../../agent-team/handoffs/AA3-003-Result.md); changefeed noted at [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20). |

| 2025-11-20 | AA3-004 | Remediated CL2 search parity gaps: ECMAScript regex compilation, Unicode-aware wildcard translation, word-separator parity, and new AA3 regression tests. | [`src/TextBuffer/Core/SearchTypes.cs`](../../src/TextBuffer/Core/SearchTypes.cs)<br>[`src/TextBuffer/Core/PieceTreeSearcher.cs`](../../src/TextBuffer/Core/PieceTreeSearcher.cs)<br>[`tests/TextBuffer.Tests/PieceTreeSearchTests.cs`](../../tests/TextBuffer.Tests/PieceTreeSearchTests.cs)<br>[`tests/TextBuffer.Tests/TextModelSearchTests.cs`](../../tests/TextBuffer.Tests/TextModelSearchTests.cs)<br>[`agent-team/handoffs/AA3-004-Result.md`](../../agent-team/handoffs/AA3-004-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (84/84) | Y | Changefeed entry recorded at [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20). |
| 2025-11-20 | AA3-006 | Ported TS `LinesDiff` pipeline with inner word changes, move detection heuristics, timeout-aware options, and expanded diff regression tests. | [`src/TextBuffer/Diff/DiffComputer.cs`](../../src/TextBuffer/Diff/DiffComputer.cs)<br>[`src/TextBuffer/Diff`](../../src/TextBuffer/Diff)<br>[`tests/TextBuffer.Tests/DiffTests.cs`](../../tests/TextBuffer.Tests/DiffTests.cs)<br>[`agent-team/handoffs/AA3-006-Result.md`](../../agent-team/handoffs/AA3-006-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (80/80) | Y | Changefeed entry recorded at [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20). |
| 2025-11-20 | AA3-008 | Delivered CL4 decorations/docUI parity: added `DecorationsTrees`, `DecorationRangeUpdater`, owner-aware decoration queries, metadata-rich `OnDidChangeDecorations`, and a Markdown renderer that renders injected text, glyph/margin/minimap/overview annotations, and owner-filtered z-indexed markers. | [`src/TextBuffer/Decorations/DecorationsTrees.cs`](../../src/TextBuffer/Decorations/DecorationsTrees.cs)<br>[`src/TextBuffer/Decorations/DecorationRangeUpdater.cs`](../../src/TextBuffer/Decorations/DecorationRangeUpdater.cs)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`src/TextBuffer/TextModelDecorationsChangedEventArgs.cs`](../../src/TextBuffer/TextModelDecorationsChangedEventArgs.cs)<br>[`src/TextBuffer/Rendering/MarkdownRenderer.cs`](../../src/TextBuffer/Rendering/MarkdownRenderer.cs)<br>[`src/TextBuffer/Rendering/MarkdownRenderOptions.cs`](../../src/TextBuffer/Rendering/MarkdownRenderOptions.cs)<br>[`tests/TextBuffer.Tests/DecorationTests.cs`](../../tests/TextBuffer.Tests/DecorationTests.cs)<br>[`tests/TextBuffer.Tests/MarkdownRendererTests.cs`](../../tests/TextBuffer.Tests/MarkdownRendererTests.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (85/85 incl. new DocUI fixtures) | Y | See [`agent-team/handoffs/AA3-008-Result.md`](../../agent-team/handoffs/AA3-008-Result.md) and changefeed entry [`agent-team/indexes/README.md#delta-2025-11-20`](../../agent-team/indexes/README.md#delta-2025-11-20). |
| 2025-11-20 | AA4-005 (Plan) | Porter-CS remediation plan created for CL5 builder/factory parity, outlining chunk splitting, BOM/metadata plumbing, factory API, DefaultEOL heuristics, normalize pipeline, and associated tests. | [`agent-team/handoffs/AA4-005-Plan.md`](../../agent-team/handoffs/AA4-005-Plan.md)<br>[`agent-team/handoffs/AA4-001-Audit.md`](../../agent-team/handoffs/AA4-001-Audit.md)<br>[`docs/reports/audit-checklist-aa4.md#cl5`](../../docs/reports/audit-checklist-aa4.md#cl5) | Planning artifact only; tests to be added in AA4-005 implementation (`dotnet test` pending). | N | Serves as pre-implementation record per Sprint 02 plan; changefeed entry will be added alongside the actual AA4-005 fix. |
| 2025-11-20 | AA4-005 | Implemented CL5 builder/factory parity: `PieceTreeBuilder` now streaming-splits chunks with BOM/metadata retention, normalization-aware `PieceTreeTextBufferFactory` exposes preview APIs + builder options, chunk utilities/scanners keep CRLF & surrogate pairs intact, and tests cover chunk segmentation, BOM/metadata flags, factory EOL heuristics, and CR carryovers. | [`src/TextBuffer/Core/PieceTreeBuilder.cs`](../../src/TextBuffer/Core/PieceTreeBuilder.cs)<br>[`src/TextBuffer/Core/PieceTreeTextBufferFactory.cs`](../../src/TextBuffer/Core/PieceTreeTextBufferFactory.cs)<br>[`src/TextBuffer/Core/ChunkUtilities.cs`](../../src/TextBuffer/Core/ChunkUtilities.cs)<br>[`src/TextBuffer/Core/TextMetadataScanner.cs`](../../src/TextBuffer/Core/TextMetadataScanner.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs)<br>[`tests/TextBuffer.Tests/PieceTreeBuilderTests.cs`](../../tests/TextBuffer.Tests/PieceTreeBuilderTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeFactoryTests.cs`](../../tests/TextBuffer.Tests/PieceTreeFactoryTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeTestHelpers.cs`](../../tests/TextBuffer.Tests/PieceTreeTestHelpers.cs)<br>[`tests/TextBuffer.Tests/AA005Tests.cs`](../../tests/TextBuffer.Tests/AA005Tests.cs)<br>[`agent-team/handoffs/AA4-005-Result.md`](../../agent-team/handoffs/AA4-005-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (95/95) | N | Changefeed entry to be published with OI-011 once QA-AA4-009 signs off; Sprint 02 trackers reference this row. |
| 2025-11-20 | AA4-005 | Implemented CL5 builder/factory parity: `PieceTreeBuilder` now streaming-splits chunks with BOM/metadata retention, normalization-aware `PieceTreeTextBufferFactory` exposes preview APIs + builder options, chunk utilities/scanners keep CRLF & surrogate pairs intact, and tests cover chunk segmentation, BOM/metadata flags, factory EOL heuristics, and CR carryovers. | [`src/TextBuffer/Core/PieceTreeBuilder.cs`](../../src/TextBuffer/Core/PieceTreeBuilder.cs)<br>[`src/TextBuffer/Core/PieceTreeTextBufferFactory.cs`](../../src/TextBuffer/Core/PieceTreeTextBufferFactory.cs)<br>[`src/TextBuffer/Core/ChunkUtilities.cs`](../../src/TextBuffer/Core/ChunkUtilities.cs)<br>[`src/TextBuffer/Core/TextMetadataScanner.cs`](../../src/TextBuffer/Core/TextMetadataScanner.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs)<br>[`tests/TextBuffer.Tests/PieceTreeBuilderTests.cs`](../../tests/TextBuffer.Tests/PieceTreeBuilderTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeFactoryTests.cs`](../../tests/TextBuffer.Tests/PieceTreeFactoryTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeTestHelpers.cs`](../../tests/TextBuffer.Tests/PieceTreeTestHelpers.cs)<br>[`tests/TextBuffer.Tests/AA005Tests.cs`](../../tests/TextBuffer.Tests/AA005Tests.cs)<br>[`agent-team/handoffs/AA4-005-Result.md`](../../agent-team/handoffs/AA4-005-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (95/95) | Y | Delta recorded at [`agent-team/indexes/README.md#delta-2025-11-21`](../../agent-team/indexes/README.md#delta-2025-11-21); QA verified via [`agent-team/handoffs/AA4-009-QA.md`](../../agent-team/handoffs/AA4-009-QA.md). |
| 2025-11-21 | AA4-006 | Implemented CL6 change buffer/CRLF/large edit parity: `_lastChangeBufferPos` appended reuse, AverageBufferSize heuristics for chunk splitting, more precise SearchCache invalidation, and CRLF repair logic added. Unit tests added (append optimization, large insert chunk splitting, CRLF restoration, fuzz tests). | [`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/Core/ChunkUtilities.cs`](../../src/TextBuffer/Core/ChunkUtilities.cs)<br>[`src/TextBuffer/Core/TextMetadataScanner.cs`](../../src/TextBuffer/Core/TextMetadataScanner.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs)<br>[`tests/TextBuffer.Tests/PieceTreeModelTests.cs`](../../tests/TextBuffer.Tests/PieceTreeModelTests.cs)<br>[`agent-team/handoffs/AA4-006-Result.md`](../../agent-team/handoffs/AA4-006-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (98/100) | Y | Initial Porter run – delta recorded at [`agent-team/indexes/README.md#delta-2025-11-21`](../../agent-team/indexes/README.md#delta-2025-11-21); see QA baseline at [`agent-team/handoffs/AA4-009-QA.md`](../../agent-team/handoffs/AA4-009-QA.md). |
| 2025-11-21 | AA4-007 | Implemented CL7 cursor parity: cursor multi-selection infra (`CursorCollection`, `CursorState`, `CursorContext`), word navigation/classifier (`WordCharacterClassifier`, `WordOperations`), `CursorColumns` visible ↔ buffer conversion, and minimal `SnippetSession`/`SnippetController` with placeholder decorations and navigation. | [`src/TextBuffer/Cursor`](../../src/TextBuffer/Cursor)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`src/TextBuffer/Rendering/MarkdownRenderer.cs`](../../src/TextBuffer/Rendering/MarkdownRenderer.cs)<br>[`tests/TextBuffer.Tests/CursorMultiSelectionTests.cs`](../../tests/TextBuffer.Tests/CursorMultiSelectionTests.cs)<br>[`tests/TextBuffer.Tests/CursorWordOperationsTests.cs`](../../tests/TextBuffer.Tests/CursorWordOperationsTests.cs)<br>[`tests/TextBuffer.Tests/ColumnSelectionTests.cs`](../../tests/TextBuffer.Tests/ColumnSelectionTests.cs)<br>[`tests/TextBuffer.Tests/SnippetControllerTests.cs`](../../tests/TextBuffer.Tests/SnippetControllerTests.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (113/113) | Y | Porter implemented minimal features and tests; QA to extend test coverage for locale-aware word segmentation, injected-text vertical block selection parity and snippet choice completions. |
| 2025-11-21 | AA4-006 | Implemented change buffer append heuristics + `_lastChangeBufferPos` tracking, AverageBufferSize chunk splitting via `ChunkUtilities.SplitText`, and more granular SearchCache invalidation with only affected range invalidated. Added new tests for change buffer append optimization, average buffer splitting, CRLF cross-chunk repair cases, and search-cache precision. | [`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`src/TextBuffer/Core/ChunkUtilities.cs`](../../src/TextBuffer/Core/ChunkUtilities.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs)<br>[`tests/TextBuffer.Tests/PieceTreeModelTests.cs`](../../tests/TextBuffer.Tests/PieceTreeModelTests.cs)<br>[`tests/TextBuffer.Tests/AA005Tests.cs`](../../tests/TextBuffer.Tests/AA005Tests.cs)<br>[`agent-team/handoffs/AA4-006-Result.md`](../../agent-team/handoffs/AA4-006-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (97/100; CRLF edge cases still failing) | N | Porter Complete – QA pending. CRLF boundary follow-ups remain tracked in [`agent-team/handoffs/AA4-006-Result.md`](../../agent-team/handoffs/AA4-006-Result.md) and will close with the Info-Indexer update at [`agent-team/indexes/README.md#delta-2025-11-21`](../../agent-team/indexes/README.md#delta-2025-11-21). |

| 2025-11-21 | AA4-006 (QA Verified) | Final QA-verified CL6 remediations: `_lastChangeBufferPos` append optimization, AverageBufferSize chunk split heuristics, improved SearchCache precision, and robust CRLF cross-chunk repair. | [`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`src/TextBuffer/Core/ChunkUtilities.cs`](../../src/TextBuffer/Core/ChunkUtilities.cs)<br>[`src/TextBuffer/Core/TextMetadataScanner.cs`](../../src/TextBuffer/Core/TextMetadataScanner.cs)<br>[`src/TextBuffer/PieceTreeBuffer.cs`](../../src/TextBuffer/PieceTreeBuffer.cs)<br>[`tests/TextBuffer.Tests/PieceTreeModelTests.cs`](../../tests/TextBuffer.Tests/PieceTreeModelTests.cs)<br>[`tests/TextBuffer.Tests/CRLFFuzzTests.cs`](../../tests/TextBuffer.Tests/CRLFFuzzTests.cs)<br>[`agent-team/handoffs/AA4-006-Result.md`](../../agent-team/handoffs/AA4-006-Result.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (105/105) | Y | Porter & QA verified: CRLF edge cases fixed; fuzz harness re-run; delta recorded at [`agent-team/indexes/README.md#delta-2025-11-21`](../../agent-team/indexes/README.md#delta-2025-11-21). |
| 2025-11-21 | AA4-007.BF1 | Fixed snippet placeholder navigation loops by tracking live decorations so multi-cursor snippet fuzzing terminates and preserves offset parity after edits. | [`src/TextBuffer/Cursor/SnippetSession.cs`](../../src/TextBuffer/Cursor/SnippetSession.cs) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName=PieceTree.TextBuffer.Tests.SnippetMultiCursorFuzzTests.SnippetAndMultiCursor_Fuzz_NoCrashesAndInvariantsHold" --nologo` (1/1)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (115/115) | Y | Logged under [`agent-team/indexes/README.md#delta-2025-11-21`](../../agent-team/indexes/README.md#delta-2025-11-21); fuzz hang no longer repros with deterministic seed 12345. |
| 2025-11-22 | **Batch #1 – ReplacePattern** (AA4-008) | Ported TS ReplacePattern parser + case-preserving logic with 23 TS parity tests. | [`src/TextBuffer/Core/ReplacePattern.cs`](../../src/TextBuffer/Core/ReplacePattern.cs)<br>[`src/TextBuffer/Rendering/DocUIReplaceController.cs`](../../src/TextBuffer/Rendering/DocUIReplaceController.cs)<br>[`tests/TextBuffer.Tests/ReplacePatternTests.cs`](../../tests/TextBuffer.Tests/ReplacePatternTests.cs) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (142/142)<br>`dotnet test --filter "FullyQualifiedName~ReplacePatternTests" --nologo` (23/23) | Y | Porter: [`agent-team/handoffs/B1-PORTER-Result.md`](../../agent-team/handoffs/B1-PORTER-Result.md); QA: [`agent-team/handoffs/B1-QA-Result.md`](../../agent-team/handoffs/B1-QA-Result.md); Changefeed: [`agent-team/indexes/README.md#delta-2025-11-22`](../../agent-team/indexes/README.md#delta-2025-11-22) |
| 2025-11-22 | **Batch #1 文档修正** (QA Follow-up) | Fixed TestMatrix/ts-test-alignment docs referencing non-existent DocUIReplacePatternTests class, fixtures, and snapshots; changed DocUIReplaceController.ExecuteReplace from silent no-op to NotImplementedException. | [`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/plans/ts-test-alignment.md`](../../docs/plans/ts-test-alignment.md)<br>[`src/TextBuffer/Rendering/DocUIReplaceController.cs`](../../src/TextBuffer/Rendering/DocUIReplaceController.cs) | `dotnet test --filter "FullyQualifiedName~ReplacePatternTests" --nologo` (23/23) | Y | Medium × 2 fixes: 1) Corrected test class name to ReplacePatternTests (no DocUI/ subfolder/fixtures/snapshots exist); 2) ExecuteReplace now throws to prevent data-loss traps. Changefeed: [`agent-team/indexes/README.md#delta-2025-11-22`](../../agent-team/indexes/README.md#delta-2025-11-22) |
| 2025-11-23 | Batch #2 | FindModel Tests | [`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs) (39 tests), [`src/TextBuffer/DocUI/FindDecorations.cs`](../../src/TextBuffer/DocUI/FindDecorations.cs), [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs), [`src/TextBuffer/DocUI/FindReplaceState.cs`](../../src/TextBuffer/DocUI/FindReplaceState.cs), [`tests/TextBuffer.Tests/DocUI/TestEditorContext.cs`](../../tests/TextBuffer.Tests/DocUI/TestEditorContext.cs) | 187/187 | Y | TS parity 完成（39/43 tests，4 个 multi-cursor 推迟 Batch #3）；修复 CI-1/CI-2/CI-3；辅助测试：LineCountTest, RegexTest, EmptyStringRegexTest。 |
| 2025-11-23 | <a id="fr-01-02"></a>FR-01 / FR-02 | IgnoreModelContentChanged & WordSeparators LRU Cache | [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs) (`_ignoreModelContentChanged` flag), [`src/TextBuffer/Core/SearchTypes.cs`](../../src/TextBuffer/Core/SearchTypes.cs) (`WordCharacterClassifierCache` + `ParseSearchRequest` hook) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj` (187/187 unchanged) | Y | 消除 Replace/ReplaceAll 后重复 Research（行为与 TS `findModel` 一致）；加入 10-entry LRU 单词分类缓存（TS `getMapForWordSeparators` 思路移植）提高频繁边界判定性能。Changefeed: [`agent-team/indexes/README.md#delta-2025-11-23`](../../agent-team/indexes/README.md#delta-2025-11-23). |
| 2025-11-23 | B3-FM (Sprint 03 R12) | Completed `FindModel.SelectAllMatches` TS parity with ordered multi-cursor selections + primary cursor retention; added FM-01/FM-02 regression tests mirroring `selectAllMatches` + issue #14143. | [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs)<br>[`agent-team/handoffs/B3-FM-Result.md`](../../agent-team/handoffs/B3-FM-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (186/186) | Y | Changefeed entry: [`agent-team/indexes/README.md#delta-2025-11-23-b3-fm`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-fm); Sprint 03 R12 log + TestMatrix updated. |
| 2025-11-24 | B3-Fuzz-Harness (R25) | Implemented env-seeded `PieceTreeFuzzHarness` + range diff helper (`PieceTreeRangeDiff`), upgraded `FuzzLogCollector` with structured operation logs, strengthened `PieceTreeModel.AssertPieceIntegrity()` with TS-style RB-tree invariants, and added harness smoke tests/docs. | [`tests/TextBuffer.Tests/Helpers/PieceTreeFuzzHarness.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeFuzzHarness.cs)<br>[`tests/TextBuffer.Tests/Helpers/FuzzLogCollector.cs`](../../tests/TextBuffer.Tests/Helpers/FuzzLogCollector.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`tests/TextBuffer.Tests/PieceTreeFuzzHarnessTests.cs`](../../tests/TextBuffer.Tests/PieceTreeFuzzHarnessTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/B3-PieceTree-Fuzz-Harness.md`](../../agent-team/handoffs/B3-PieceTree-Fuzz-Harness.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeFuzzHarnessTests --nologo` (2/2)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (245/245, 4.1s) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-23-b3-piecetree-fuzz`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-piecetree-fuzz). |
| 2025-11-24 | B3-PieceTree-Fuzz-Review | Added multi-chunk seeding path, TS deterministic `random test/delete/chunks` suites, and harness-side line parity assertions per `PieceTreeRangeDiff`. | [`tests/TextBuffer.Tests/Helpers/PieceTreeFuzzHarness.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeFuzzHarness.cs)<br>[`tests/TextBuffer.Tests/PieceTreeFuzzHarnessTests.cs`](../../tests/TextBuffer.Tests/PieceTreeFuzzHarnessTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/B3-PieceTree-Fuzz-Review-PORT.md`](../../agent-team/handoffs/B3-PieceTree-Fuzz-Review-PORT.md)<br>[`agent-team/handoffs/B3-PieceTree-Fuzz-Review-QA.md`](../../agent-team/handoffs/B3-PieceTree-Fuzz-Review-QA.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeFuzzHarnessTests --nologo` (10/10，≈53s) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-24-b3-piecetree-fuzz`](../../agent-team/indexes/README.md#delta-2025-11-24-b3-piecetree-fuzz). |
| 2025-11-24 | B3-PieceTree-Deterministic | Published deterministic prefix-sum/offset/range suites with shared helper assertions/scripts and tied TestMatrix coverage to a dedicated changefeed. | [`tests/TextBuffer.Tests/Helpers/PieceTreeBufferAssertions.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeBufferAssertions.cs)<br>[`tests/TextBuffer.Tests/Helpers/PieceTreeScript.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeScript.cs)<br>[`tests/TextBuffer.Tests/PieceTreeDeterministicTests.cs`](../../tests/TextBuffer.Tests/PieceTreeDeterministicTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeDeterministicTests --nologo` (22/22) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-24-b3-piecetree-deterministic`](../../agent-team/indexes/README.md#delta-2025-11-24-b3-piecetree-deterministic). |
| 2025-11-24 | B3-TestFailures-Sentinel | PieceTreeModel now gives each tree its own sentinel, updates rotation/insert helpers to pass `_sentinel`, and exposes `model.Sentinel` for tests to detect terminators; RB-tree invariant assertions were expanded accordingly. | [`src/TextBuffer/Core/PieceTreeNode.cs`](../../src/TextBuffer/Core/PieceTreeNode.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`tests/TextBuffer.Tests/PieceTreeModelTests.cs`](../../tests/TextBuffer.Tests/PieceTreeModelTests.cs)<br>[`tests/TextBuffer.Tests/UnitTest1.cs`](../../tests/TextBuffer.Tests/UnitTest1.cs)<br>[`tests/TextBuffer.Tests/PieceTreeFuzzHarnessTests.cs`](../../tests/TextBuffer.Tests/PieceTreeFuzzHarnessTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/type-mapping.md`](../../agent-team/type-mapping.md)<br>[`agent-team/handoffs/B3-TestFailures-PORT.md`](../../agent-team/handoffs/B3-TestFailures-PORT.md)<br>[`agent-team/handoffs/B3-TestFailures-QA.md`](../../agent-team/handoffs/B3-TestFailures-QA.md) | `export PIECETREE_DEBUG=0 && dotnet test -v m` (253/253)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName=PieceTree.TextBuffer.Tests.PieceTreeFuzzHarnessTests.RandomDeleteThreeMatchesTsScript" --nologo` (1/1) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-24-b3-sentinel`](../../agent-team/indexes/README.md#delta-2025-11-24-b3-sentinel). |
| 2025-11-24 | B3-TestFailures-GetLineContent | Cache invalidation + normalization suites now expect trimmed `GetLineContent` while asserting raw CR/LF bytes via `GetLineRawContent`, matching VS Code’s `splitLines` behavior. | [`tests/TextBuffer.Tests/PieceTreeBaseTests.cs`](../../tests/TextBuffer.Tests/PieceTreeBaseTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeNormalizationTests.cs`](../../tests/TextBuffer.Tests/PieceTreeNormalizationTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/plans/ts-test-alignment.md`](../../docs/plans/ts-test-alignment.md)<br>[`agent-team/handoffs/B3-TestFailures-PORT.md`](../../agent-team/handoffs/B3-TestFailures-PORT.md)<br>[`agent-team/handoffs/B3-TestFailures-QA.md`](../../agent-team/handoffs/B3-TestFailures-QA.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName~PieceTreeBaseTests.GetLineContent_Cache_Invalidation" --nologo` (2/2)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName~PieceTreeNormalizationTests" --nologo` (3/3) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-24-b3-getlinecontent`](../../agent-team/indexes/README.md#delta-2025-11-24-b3-getlinecontent). |
| 2025-11-23 | B3-FSel (Sprint 03 R13) | Implemented `FindUtilities` (`getSelectionSearchString` + `GetWordAtPosition`) and DocUI selection context, ported TS `find.test.ts` cases into `DocUIFindSelectionTests.cs`, and updated Sprint/TestMatrix/Migration docs. | [`src/TextBuffer/DocUI/FindUtilities.cs`](../../src/TextBuffer/DocUI/FindUtilities.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindSelectionTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindSelectionTests.cs)<br>[`docs/sprints/sprint-03.md`](../../docs/sprints/sprint-03.md)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/B3-FSel-Result.md`](../../agent-team/handoffs/B3-FSel-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (189/189) | Y | Changefeed entry: [`agent-team/indexes/README.md#delta-2025-11-23-b3-fsel`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-fsel); references `#delta-2025-11-23-b3-fsel`. |
| 2025-11-23 | B3-FC (Sprint 03 R14) | Added `DocUIFindController` with command helpers, focus/clipboard/storage hooks, TS parity host stubs, and ported issue-focused `DocUIFindControllerTests.cs`. Updated Sprint/TestMatrix/Migration docs plus changefeed. | [`src/TextBuffer/DocUI/DocUIFindController.cs`](../../src/TextBuffer/DocUI/DocUIFindController.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/sprints/sprint-03.md`](../../docs/sprints/sprint-03.md)<br>[`agent-team/handoffs/B3-FC-Result.md`](../../agent-team/handoffs/B3-FC-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindControllerTests --nologo` (10/10)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (199/199) | Y | Changefeed entry: [`agent-team/indexes/README.md#delta-2025-11-23-b3-fc-core`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-fc-core); scope lifecycle + global clipboard enhancements deferred to R15. |
| 2025-11-23 | B3-FC-Scope (Sprint 03 R14/R15) | Fixed W1 scope persistence regression (only update search scope when `BuildSearchScope()` returns non-null) and W2 Ctrl/Cmd+F3 behavior (always reveal widget + retry when `MoveToNextMatch()` fails). Added targeted DocUI tests, TestMatrix delta, migration/changefeed updates. | [`src/TextBuffer/DocUI/DocUIFindController.cs`](../../src/TextBuffer/DocUI/DocUIFindController.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/B3-FC-Review.md`](../../agent-team/handoffs/B3-FC-Review.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindControllerTests --nologo` (15/15) | Y | Changefeed entry: [`agent-team/indexes/README.md#delta-2025-11-23-b3-fc-scope`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-fc-scope); references W1/W2 closures + TestMatrix delta tag `#delta-2025-11-23-b3-fc-scope`. |
| 2025-11-23 | B3-FC-Lifecycle | Addressed Investigator DocUI findings: Ctrl+F reseeds whenever host option≠Never, `StartFindReplaceAction` obeys `SeedSearchStringMode.Never` (disables selection/global clipboard seeding), FindModel now lazily instantiated + disposed when widget hides (clearing match info), replace panel resets when reopening, and Cmd+E (`StartFindWithSelectionAction`) coverage for TS issues #47400/#109756 landed. Updated docs/TestMatrix with new `#delta-2025-11-23-b3-fc-lifecycle` anchor. | [`src/TextBuffer/DocUI/DocUIFindController.cs`](../../src/TextBuffer/DocUI/DocUIFindController.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/plans/ts-test-alignment.md`](../../docs/plans/ts-test-alignment.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindControllerTests --nologo` (26/26)<br>`dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindSelectionTests --nologo` (4/4)<br>`dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (217/217) | Y | Changefeed recorded at [`agent-team/indexes/README.md#delta-2025-11-23-b3-fc-lifecycle`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-fc-lifecycle); AGENTS/Sprint/TestMatrix 已对齐该锚点。 |
| 2025-11-23 | B3-FC-RegexSeed | Cmd+E / `StartFindWithSelection` seeding in regex mode now keeps literal multi-line selections (no `Regex.Escape`), matching TS parity for issue #47400 scenarios; selection-match helpers reuse the new mode-aware normalization flag. | [`src/TextBuffer/DocUI/DocUIFindController.cs`](../../src/TextBuffer/DocUI/DocUIFindController.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindControllerTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindControllerTests --nologo` (27/27)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (218/218) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-23-b3-fc-regexseed`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-fc-regexseed); TestMatrix updated with 27/27 rerun + new regression description. |
| 2025-11-23 | B3-Decor | Delivered DocUI find decoration parity: `FindDecorations` now mirrors TS range highlight trimming, overview throttling (>1000 merges), minimap/overview metadata, and scope normalization; `TextModel` exposes `GetAllDecorations`/`GetLineDecorations`/`GetDecorationIdsByOwner`; DocUI/QA suites gain `DocUIFindDecorationsTests`, expanded `DecorationTests`, and new `DecorationStickinessTests` (stickiness edge matrix). | [`src/TextBuffer/DocUI/FindDecorations.cs`](../../src/TextBuffer/DocUI/FindDecorations.cs)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`tests/TextBuffer.Tests/DecorationTests.cs`](../../tests/TextBuffer.Tests/DecorationTests.cs)<br>[`tests/TextBuffer.Tests/DecorationStickinessTests.cs`](../../tests/TextBuffer.Tests/DecorationStickinessTests.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/plans/ts-test-alignment.md`](../../docs/plans/ts-test-alignment.md)<br>[`agent-team/task-board.md`](../../agent-team/task-board.md)<br>[`agent-team/handoffs/B3-Decor-PORTER.md`](../../agent-team/handoffs/B3-Decor-PORTER.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (233/233)<br>`dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DecorationStickinessTests --nologo` (4/4)<br>`dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindDecorationsTests --nologo` (6/6) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-23-b3-decor-stickiness`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-decor-stickiness); Sprint 03 / Task Board / TS Plan / TestMatrix all reference该锚点。 |
| 2025-11-23 | B3-Decor-Stickiness-Review | Closed Investigator CI-1/CI-2/CI-3 + W-1/W-2: removed cached scopes, preserved scope trailing newlines, wired `FindDecorations` to host-provided viewport height for overview throttling, and allocated decoration owner IDs per instance; updated DocUI find controller/test harness to pass the new viewport provider and expanded DocUI tests to cover scope edits + viewport throttling. | [`src/TextBuffer/DocUI/FindDecorations.cs`](../../src/TextBuffer/DocUI/FindDecorations.cs)<br>[`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs)<br>[`src/TextBuffer/DocUI/DocUIFindController.cs`](../../src/TextBuffer/DocUI/DocUIFindController.cs)<br>[`tests/TextBuffer.Tests/DocUI/TestEditorContext.cs`](../../tests/TextBuffer.Tests/DocUI/TestEditorContext.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/plans/ts-test-alignment.md`](../../docs/plans/ts-test-alignment.md)<br>[`docs/sprints/sprint-03.md`](../../docs/sprints/sprint-03.md)<br>[`agent-team/task-board.md`](../../agent-team/task-board.md)<br>[`agent-team/handoffs/B3-Decor-Stickiness-Review.md`](../../agent-team/handoffs/B3-Decor-Stickiness-Review.md) | `dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (235/235)<br>`dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DocUIFindDecorationsTests --nologo` (9/9)<br>`dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter DecorationStickinessTests --nologo` (4/4) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-23-b3-decor-stickiness-review`](../../agent-team/indexes/README.md#delta-2025-11-23-b3-decor-stickiness-review); references TestMatrix/Sprint/Plan/Task Board updates closing CI-1/CI-2/CI-3 + W-1/W-2. |
| 2025-11-24 | <a id="b3-fm-scope"></a>B3-FM-Scope | Restored TS scope tracking parity: FindModel now queues one-shot search scope overrides, resolves scopes from decorations after edits, and normalizes multi-line scopes to full lines (TS #27083). Added DocUI tests covering scope rehydration after typing + multi-line normalization and updated QA docs/TestMatrix. | [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter FullyQualifiedName~FindModelTests --nologo` (44/44) | Y | Changefeed [`agent-team/indexes/README.md#delta-2025-11-24-find-scope`](../../agent-team/indexes/README.md#delta-2025-11-24-find-scope). Legacy alias `FullyQualifiedName~DocUIFindModelTests` produced 0/0 and is now retired; docs/TestMatrix capture the replacement filter. |
| 2025-11-24 | <a id="b3-fm-replacescope"></a>B3-FM-ReplaceScope | Ensured scoped regex replacements hydrate live decoration ranges before computing captures. `FindModel.GetMatchesForReplace()` now mirrors TS `_getReplaceString` flow by calling the same scope resolver as navigation, preventing stale offsets after edits. Added regression **Test47_RegexReplaceWithinScopeUsesLiveRangesAfterEdit** plus TestMatrix/changefeed updates. | [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/AA4-Review-INV.md`](../../agent-team/handoffs/AA4-Review-INV.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter FullyQualifiedName~FindModelTests --nologo` (45/45) | Y | Changefeed [`agent-team/indexes/README.md#delta-2025-11-24-find-replace-scope`](../../agent-team/indexes/README.md#delta-2025-11-24-find-replace-scope). |
| 2025-11-24 | B3-DocUI-StagedFixes | Closed Investigator CI items: stopped `FindDecorations.Reset()` from zeroing `_startPosition`, taught `IntervalTree.CollectOverlaps()` to treat zero-length queries like TS point-in-range checks, and added DocUI regressions (**Test48_FlushEditKeepsFindNextProgress**, **CollapsedCaretAtMatchStartReturnsIndex**). Updated TestMatrix + new handoff summarizing scope. | [`src/TextBuffer/DocUI/FindDecorations.cs`](../../src/TextBuffer/DocUI/FindDecorations.cs)<br>[`src/TextBuffer/Decorations/IntervalTree.cs`](../../src/TextBuffer/Decorations/IntervalTree.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/B3-DocUI-StagedFixes-20251124.md`](../../agent-team/handoffs/B3-DocUI-StagedFixes-20251124.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter FullyQualifiedName~FindModelTests --nologo` (46/46 via QA rerun)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter FullyQualifiedName~DocUIFindDecorationsTests --nologo` (9/9) | Y | Changefeed: [`agent-team/indexes/README.md#delta-2025-11-24-b3-docui-staged`](../../agent-team/indexes/README.md#delta-2025-11-24-b3-docui-staged); QA addendum in [`agent-team/handoffs/B3-DocUI-StagedFixes-QA-20251124.md`](../../agent-team/handoffs/B3-DocUI-StagedFixes-QA-20251124.md). |
| 2025-11-24 | B3-FM-MultiSel | Finished Batch #3 multi-selection track: FindModel now clones multi-range selections, retains the primary cursor when selecting all matches, and TestEditorContext can stage overlapping scopes for navigation parity. Re-enabled TS Test07/08 cases to verify wrap-around in overlapping/disjoint scopes. | [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs)<br>[`tests/TextBuffer.Tests/DocUI/TestEditorContext.cs`](../../tests/TextBuffer.Tests/DocUI/TestEditorContext.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs)<br>[`agent-team/handoffs/B3-FM-MultiSelection-PORT.md`](../../agent-team/handoffs/B3-FM-MultiSelection-PORT.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName=PieceTree.TextBuffer.Tests.DocUI.FindModelTests.Test07_MultiSelectionFindModelNextStaysInScopeOverlap|FullyQualifiedName=PieceTree.TextBuffer.Tests.DocUI.FindModelTests.Test08_MultiSelectionFindModelNextStaysInScope" --nologo` (2/2, 1.7s)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName~FindModelTests" --nologo` (48/48, 3.3s)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (242/242, 2.9s) | Y | Changefeed anchor `#delta-2025-11-24-b3-fm-multisel`; legacy alias `FullyQualifiedName~DocUIFindModelTests` has been retired so documentation now references the `FindModelTests` filters exclusively. |
| 2025-11-24 | B3-FM-PrimarySelection | Defaulted `FindModel.SetSelections` to treat index 0 as the primary cursor (matching VS Code), removed unused multi-selection caches, and taught the DocUI harness plus `SelectAllMatches` regression (**Test49_SelectAllMatchesRespectsPrimarySelectionOrder**) to enforce primary-selection ordering. | [`src/TextBuffer/DocUI/FindModel.cs`](../../src/TextBuffer/DocUI/FindModel.cs)<br>[`tests/TextBuffer.Tests/DocUI/TestEditorContext.cs`](../../tests/TextBuffer.Tests/DocUI/TestEditorContext.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindModelTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/AA4-FindModel-Review-PORT.md`](../../agent-team/handoffs/AA4-FindModel-Review-PORT.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName~FindModelTests" --nologo` (49/49, 3.4s) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-24-find-primary`](../../agent-team/indexes/README.md#delta-2025-11-24-find-primary); closes AA4 review findings on primary-selection ordering + unused state. |
| 2025-11-25 | B3-PieceTree-Deterministic-CRLF | Ported TS CRLF normalization bug battery plus centralized line-start/chunk deterministic suites (ts lines 1054-1589) into `PieceTreeDeterministicTests` using new `PieceTreeDeterministicScripts` helper data; deterministic harness now covers 50 Facts, including the legacy delete-in-CRLF regressions. Updated TestMatrix + changefeed guidance for QA reruns. | [`tests/TextBuffer.Tests/Helpers/PieceTreeDeterministicScripts.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeDeterministicScripts.cs)<br>[`tests/TextBuffer.Tests/PieceTreeDeterministicTests.cs`](../../tests/TextBuffer.Tests/PieceTreeDeterministicTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeDeterministicTests --nologo` (50/50, 3.5s) + `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (308/308, 67.2s); QA log: [`agent-team/handoffs/B3-PieceTree-Deterministic-CRLF-QA.md`](../../agent-team/handoffs/B3-PieceTree-Deterministic-CRLF-QA.md). | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-25-b3-piecetree-deterministic-crlf`](../../agent-team/indexes/README.md#delta-2025-11-25-b3-piecetree-deterministic-crlf); TestMatrix & docs now reflect the 50 Fact deterministic rerun + 308-test baseline with QA evidence attached. |
| 2025-11-25 | B3-PieceTree-Snapshot | Streamed `PieceTreeSnapshot.Read()` parity with TS (`bug #45564` + immutable snapshot scripts), added `TextModel.CreateSnapshot()` and a `SnapshotReader` helper so tests drain snapshots exactly once, and ported the four TS deterministics into `PieceTreeSnapshotParityTests`. Updated legacy snapshot smoke tests to use TextModel snapshots and recorded rerun guidance in TestMatrix. | [`src/TextBuffer/Core/PieceTreeSnapshot.cs`](../../src/TextBuffer/Core/PieceTreeSnapshot.cs)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs)<br>[`tests/TextBuffer.Tests/Helpers/SnapshotReader.cs`](../../tests/TextBuffer.Tests/Helpers/SnapshotReader.cs)<br>[`tests/TextBuffer.Tests/PieceTreeSnapshotTests.cs`](../../tests/TextBuffer.Tests/PieceTreeSnapshotTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeSnapshotParityTests.cs`](../../tests/TextBuffer.Tests/PieceTreeSnapshotParityTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeSnapshotParityTests --nologo` (4/4, 1.7s) + `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (312/312, 58.7s). | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-25-b3-piecetree-snapshot`](../../agent-team/indexes/README.md#delta-2025-11-25-b3-piecetree-snapshot); handoff [`agent-team/handoffs/B3-PieceTree-Snapshot-PORT.md`](../../agent-team/handoffs/B3-PieceTree-Snapshot-PORT.md) captures scope/tests/follow-ups. |
| 2025-11-25 | <a id="b3-searchoffset"></a>B3-SearchOffset-PORT | Ported the TS search-offset cache suite (render-whitespace regression + normalized EOL inserts) into deterministic PieceTree scripts, wired `PieceTreeBufferAssertions.AssertSearchCachePrimed`, and documented Sprint/TestMatrix updates so QA could certify the drop. | [`tests/TextBuffer.Tests/PieceTreeSearchOffsetCacheTests.cs`](../../tests/TextBuffer.Tests/PieceTreeSearchOffsetCacheTests.cs)<br>[`tests/TextBuffer.Tests/Helpers/PieceTreeDeterministicScripts.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeDeterministicScripts.cs)<br>[`tests/TextBuffer.Tests/Helpers/PieceTreeBufferAssertions.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeBufferAssertions.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`docs/plans/ts-test-alignment.md`](../../docs/plans/ts-test-alignment.md)<br>[`agent-team/handoffs/B3-PieceTree-SearchOffset-PORT.md`](../../agent-team/handoffs/B3-PieceTree-SearchOffset-PORT.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeSearchOffsetCacheTests --nologo` (5/5, 4.3s; targeted QA rerun)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (324/324, 58.2s; full QA baseline) | [Y](../../agent-team/indexes/README.md#delta-2025-11-25-b3-search-offset) | Porter evidence: [`agent-team/handoffs/B3-PieceTree-SearchOffset-PORT.md`](../../agent-team/handoffs/B3-PieceTree-SearchOffset-PORT.md); QA evidence: [`agent-team/handoffs/B3-PieceTree-SearchOffset-QA.md`](../../agent-team/handoffs/B3-PieceTree-SearchOffset-QA.md); changefeed anchor `#delta-2025-11-25-b3-search-offset` recorded for Task Board/Sprint/TestMatrix updates. |
| 2025-11-25 | <a id="b3-piecetree-bom"></a>B3-PieceTree-Bom | Added BOM-focused coverage to `PieceTreeBuffer` by porting TS `getBOM` behavior into `PieceTreeBufferBomTests`: verifies UTF-8 BOM prefixes become metadata (accessible via `GetBom()`) while stripped from `GetText()`, and ensures BOM-only chunks still set `_bom`. | [`tests/TextBuffer.Tests/PieceTreeBufferBomTests.cs`](../../tests/TextBuffer.Tests/PieceTreeBufferBomTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter PieceTreeBufferBomTests --nologo` (3/3, 2.2s) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-25-b3-bom`](../../agent-team/indexes/README.md#delta-2025-11-25-b3-bom); QA references recorded in `tests/TextBuffer.Tests/TestMatrix.md` targeted rerun table. |
| 2025-11-25 | B3-TextModelSearch (`#delta-2025-11-25-b3-textmodelsearch`) | Restored `SearchPatternUtilities.IsMultilineRegexSource` and ported the full 45-test TS TextModelSearch battery (word-boundary matrix, multiline/CRLF regex, capture arrays/navigation, `parseSearchRequest`/`isMultiline` parsing, zero-width + Unicode anchors) so C# now executes the same helper + suites as `textModelSearch.ts`. | [`src/TextBuffer/Core/SearchTypes.cs`](../../src/TextBuffer/Core/SearchTypes.cs)<br>[`tests/TextBuffer.Tests/TextModelSearchTests.cs`](../../tests/TextBuffer.Tests/TextModelSearchTests.cs)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter FullyQualifiedName~TextModelSearchTests --nologo` (45/45, 2.0s, `PIECETREE_DEBUG=0`) | Y | References: Investigator brief [`agent-team/handoffs/Review-20251125-Investigator.md`](../../agent-team/handoffs/Review-20251125-Investigator.md) catalogues the gap + documentation fix list; Porter memo [`agent-team/handoffs/B3-TextModelSearch-PORT.md`](../../agent-team/handoffs/B3-TextModelSearch-PORT.md) captures implementation + rerun evidence; QA handoff [`agent-team/handoffs/B3-TextModelSearch-QA.md`](../../agent-team/handoffs/B3-TextModelSearch-QA.md) logs Run R37 targeted 45/45 @ 2.5s plus the full-suite 365/365 @ 61.6s (`PIECETREE_DEBUG=0`), matching the TestMatrix + Sprint R37 entries. Remaining backlog (Intl.Segmenter word segmentation + WordSeparator cache perf) stays in AA4 planning. |
```
| 2025-11-26 | <a id="alignment-audit-r1"></a>ALIGN-AUDIT-R1 | Re-verified the alignment-audit suite (summary + modules 01–08), updating per-file statuses, remediation bullets, and coverage metrics to match the latest C#/TS parity. Each report now ends with "Verification Notes" that cite the 2025-11-26 spot-check inputs. | [`docs/reports/alignment-audit/00-summary.md`](../../docs/reports/alignment-audit/00-summary.md)<br>[`01-core-fundamentals.md`](../../docs/reports/alignment-audit/01-core-fundamentals.md)<br>[`02-core-support.md`](../../docs/reports/alignment-audit/02-core-support.md)<br>[`03-cursor.md`](../../docs/reports/alignment-audit/03-cursor.md)<br>[`04-decorations.md`](../../docs/reports/alignment-audit/04-decorations.md)<br>[`05-diff.md`](../../docs/reports/alignment-audit/05-diff.md)<br>[`06-services.md`](../../docs/reports/alignment-audit/06-services.md)<br>[`07-core-tests.md`](../../docs/reports/alignment-audit/07-core-tests.md)<br>[`08-feature-tests.md`](../../docs/reports/alignment-audit/08-feature-tests.md) | N/A – documentation verification (spot-check summaries only) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-26-alignment-audit`](../../agent-team/indexes/README.md#delta-2025-11-26-alignment-audit); cite this row + anchor before updating AGENTS/Sprint/Task Board alignment status text. |
| 2025-11-26 | <a id="ws1-port-searchcore"></a>WS1-PORT-SearchCore | Optimized `GetAccumulatedValue` with hybrid approach (LineStarts O(1) path for `_eolNormalized && _eol == "\n"`, fallback character scan for CRLF); added `#if DEBUG` counters to `PieceTreeSearchCache` (CacheHit/CacheMiss/ClearedAfterEdit) and `GetSearchCacheDiagnostics()` to `PieceTreeModel`. | [`src/TextBuffer/Core/PieceTreeModel.Search.cs`](../../src/TextBuffer/Core/PieceTreeModel.Search.cs)<br>[`src/TextBuffer/Core/PieceTreeSearchCache.cs`](../../src/TextBuffer/Core/PieceTreeSearchCache.cs)<br>[`src/TextBuffer/Core/PieceTreeModel.cs`](../../src/TextBuffer/Core/PieceTreeModel.cs)<br>[`agent-team/handoffs/WS1-PORT-SearchCore-Result.md`](../../agent-team/handoffs/WS1-PORT-SearchCore-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (365/365, ~53s) | Y | NodeAt2 O(1) tuple reuse deferred due to CRLF bridging incompatibility (TS `createNewPieces` uses '_' placeholder technique not yet ported); changefeed entry [`agent-team/indexes/README.md#delta-2025-11-26-ws1-searchcore`](../../agent-team/indexes/README.md#delta-2025-11-26-ws1-searchcore). |
| 2025-11-26 | <a id="ws2-port"></a>WS2-PORT | Implemented P0 Range/Selection Helper APIs: Range static methods (ContainsPosition/Range, StrictContains*, IntersectRanges, AreIntersecting*, PlusRange, Normalize, Collapse*, EqualsRange, CompareRanges*); Range instance methods (SetStart/EndPosition, CollapseToStart/End, Delta, IsSingleLine); Selection static methods (FromPositions, FromRange, CreateWithDirection, SelectionsEqual, SelectionsArrEqual); TextPosition extensions (With, Delta, IsBefore*, Compare). 75 unit tests added. | [`src/TextBuffer/Core/Range.Extensions.cs`](../../src/TextBuffer/Core/Range.Extensions.cs)<br>[`src/TextBuffer/Core/Selection.cs`](../../src/TextBuffer/Core/Selection.cs)<br>[`src/TextBuffer/TextPosition.cs`](../../src/TextBuffer/TextPosition.cs)<br>[`tests/TextBuffer.Tests/RangeSelectionHelperTests.cs`](../../tests/TextBuffer.Tests/RangeSelectionHelperTests.cs)<br>[`agent-team/handoffs/WS2-PORT-Result.md`](../../agent-team/handoffs/WS2-PORT-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (440/440, ~53s) | Y | TS parity achieved for Range/Selection/Position helper APIs per `INV-RangeSelection-GapReport.md`; changefeed entry [`agent-team/indexes/README.md#delta-2025-11-26-ws2-port`](../../agent-team/indexes/README.md#delta-2025-11-26-ws2-port). |
| 2025-11-26 | <a id="ws3-port-tree"></a>WS3-PORT-Tree | Complete rewrite of `IntervalTree` with TS-style lazy delta normalization: NodeFlags bitmask (color/visited/validation/stickiness/collapseOnReplace/margin/affectsFont), IntervalNode class with local offsets + delta accumulation, Sentinel pattern for null-safe operations, `RequestNormalize()`/`NormalizeDelta()` for deferred offset resolution, `AcceptReplace()` 4-phase algorithm, `ResolveNode()` for absolute offset computation, DEBUG counters (NodesRemovedCount, RequestNormalizeHits). | [`src/TextBuffer/Decorations/IntervalTree.cs`](../../src/TextBuffer/Decorations/IntervalTree.cs) (完全重写, ~1470 行)<br>[`agent-team/handoffs/WS3-PORT-Tree-Result.md`](../../agent-team/handoffs/WS3-PORT-Tree-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (440/440, ~53s) | Y | All 4 steps completed (Node layout, Lazy Delta, Normalization, ResolveState+AcceptReplace); changefeed entry [`agent-team/indexes/README.md#delta-2025-11-26-ws3-tree`](../../agent-team/indexes/README.md#delta-2025-11-26-ws3-tree). |
| 2025-11-26 | <a id="ws5-inv"></a>WS5-INV | Completed high-risk deterministic/feature test backlog prioritization: identified Top-10 priority gaps (cursorAtomicMoveOperations, wordOperations, multicursor, snippetSession, snippetController2, PieceTree buffer API, search regressions, guessIndentation, modelDecorations, diffComputer), produced module-grouped complete backlog (47 gaps, ~106h), and defined shared harness requirements with TS oracle ingestion strategy. | [`agent-team/handoffs/WS5-INV-TestBacklog.md`](../../agent-team/handoffs/WS5-INV-TestBacklog.md)<br>[`agent-team/members/investigator-ts.md`](../../agent-team/members/investigator-ts.md) | N/A – planning artifact | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-26-ws5-test-backlog`](../../agent-team/indexes/README.md#delta-2025-11-26-ws5-test-backlog); Task Board WS5-INV updated to Done. |
| 2025-11-26 | <a id="ws123-qa"></a>WS123-QA | QA verification of WS1/WS2/WS3 implementations: full test suite 440/440 green (62.1s), targeted runs for RangeSelectionHelpers (75/75), PieceTreeSearchOffsetCache (5/5), DecorationTests (12/12), DecorationStickinessTests (4/4). Confirmed DEBUG counters availability for `PieceTreeSearchCache` and `IntervalTree`. | [`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/WS123-QA-Result.md`](../../agent-team/handoffs/WS123-QA-Result.md)<br>[`agent-team/members/qa-automation.md`](../../agent-team/members/qa-automation.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (440/440, 62.1s) | Y | Changefeed anchors: `#delta-2025-11-26-ws1-searchcore`, `#delta-2025-11-26-ws2-port`, `#delta-2025-11-26-ws3-tree`; QA evidence in [`agent-team/handoffs/WS123-QA-Result.md`](../../agent-team/handoffs/WS123-QA-Result.md). |

| 2025-11-26 | <a id="ws1-port-crlf"></a>WS1-PORT-CRLF | Implemented Step 2 & 3 of `PORT-PT-Search-Plan.md`: `AppendToChangeBufferNode` hitCRLF detection (mirrors TS lines 1460-1471) with LineStarts adjustment and `_lastChangeBufferPos` rewind; `CreateNewPieces` CRLF bridge with `_` placeholder technique (mirrors TS lines 1208-1223) for monotonic LineStarts. Added `EndWithCR(PieceTreeNode)` helper and cache invalidation at bridge positions. | [`src/TextBuffer/Core/PieceTreeModel.Edit.cs`](../../src/TextBuffer/Core/PieceTreeModel.Edit.cs)<br>[`tests/TextBuffer.Tests/CRLFFuzzTests.cs`](../../tests/TextBuffer.Tests/CRLFFuzzTests.cs)<br>[`agent-team/handoffs/WS1-PORT-CRLF-Result.md`](../../agent-team/handoffs/WS1-PORT-CRLF-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter CRLFFuzzTests --nologo` (16/16, 2.6s)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (451/451, ~53s) | N | 11 new CRLF bridge tests added (Step2/Step3/EdgeCase categories); enables `GetAccumulatedValue` O(1) LineStarts path for non-CRLF-normalized documents; Sprint 04 WS1-PORT-CRLF deliverable。Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-26-sprint04-r1-r11`](../../agent-team/indexes/README.md#delta-2025-11-26-sprint04-r1-r11). |
| 2025-11-26 | <a id="ws4-port-core"></a>WS4-PORT-Core | Implemented Cursor 基础架构 Stage 0: `CursorConfiguration` (editor/model options, visible column helpers, `ICursorSimpleModel`), `SingleCursorState`/`CursorState`/`PartialModelCursorState`/`PartialViewCursorState` (TS-parity dual-state architecture), `CursorContext` with `ICoordinatesConverter` + `IdentityCoordinatesConverter` stub, `TextModel` tracked range support (`_setTrackedRange`/`_getTrackedRange`), `ModelDecoration.CreateHiddenOptions()` for hidden decorations. Feature-flagged via `TextModelOptions.EnableVsCursorParity`. | [`src/TextBuffer/Cursor/CursorConfiguration.cs`](../../src/TextBuffer/Cursor/CursorConfiguration.cs) (NEW ~407行)<br>[`src/TextBuffer/Cursor/CursorState.cs`](../../src/TextBuffer/Cursor/CursorState.cs) (REWRITE ~371行)<br>[`src/TextBuffer/Cursor/CursorContext.cs`](../../src/TextBuffer/Cursor/CursorContext.cs) (REWRITE ~260行)<br>[`src/TextBuffer/TextModel.cs`](../../src/TextBuffer/TextModel.cs) (ENHANCED)<br>[`src/TextBuffer/Decorations/ModelDecoration.cs`](../../src/TextBuffer/Decorations/ModelDecoration.cs) (ENHANCED)<br>[`tests/TextBuffer.Tests/CursorCoreTests.cs`](../../tests/TextBuffer.Tests/CursorCoreTests.cs) (NEW 25测试)<br>[`agent-team/handoffs/WS4-PORT-Core-Result.md`](../../agent-team/handoffs/WS4-PORT-Core-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter CursorCoreTests --nologo` (25/25, ~1.8s)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "FullyQualifiedName!~IntervalTreePerfTests" --nologo` (496/496, ~53s) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-26-ws4-port-core`](../../agent-team/indexes/README.md#delta-2025-11-26-ws4-port-core); 4 IntervalTreePerfTests failures are pre-existing WS3-PORT-Tree bug (outside scope). |
| 2025-11-26 | <a id="ws5-qa"></a>WS5-QA | Implemented first batch of ≥10 high-risk deterministic tests: PieceTreeBufferApiTests (17 tests covering GetLineCharCode issues #45735/#47733, GetCharCode, buffer equality, post-edit behavior), PieceTreeSearchRegressionTests (9 tests covering TS issues #45892/#45770, search from middle, search after edits), TextModelIndentationTests (19 tests + 1 skipped covering tab/space indentation patterns, ModelRespectsTabSizeOption). | [`tests/TextBuffer.Tests/PieceTreeBufferApiTests.cs`](../../tests/TextBuffer.Tests/PieceTreeBufferApiTests.cs) (NEW 17测试)<br>[`tests/TextBuffer.Tests/PieceTreeSearchRegressionTests.cs`](../../tests/TextBuffer.Tests/PieceTreeSearchRegressionTests.cs) (NEW 9测试)<br>[`tests/TextBuffer.Tests/TextModelIndentationTests.cs`](../../tests/TextBuffer.Tests/TextModelIndentationTests.cs) (NEW 19测试+1 skipped)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md) (UPDATED)<br>[`agent-team/handoffs/WS5-QA-Result.md`](../../agent-team/handoffs/WS5-QA-Result.md) | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --filter "PieceTreeBufferApiTests\|PieceTreeSearchRegressionTests\|TextModelIndentationTests" --nologo` (44/44 green, 1 skipped, ~3.2s)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (584/584 green, 1 skipped, 62s) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-26-ws5-qa`](../../agent-team/indexes/README.md#delta-2025-11-26-ws5-qa); 45 total tests (44 passing + 1 skipped for GuessIndentation API gap) exceeds ≥10 requirement. |

| 2025-11-26 | <a id="sprint04-r1-r11"></a>Sprint 04 R1-R11 | **Sprint 04 Phase 8 批量完成**：测试基线 365→585（+220）。包含 WS1-PORT-SearchCore（GetAccumulatedValue 混合 + DEBUG 计数）、WS2-PORT（75 个 Range/Selection/TextPosition helpers）、WS3-PORT-Tree（IntervalTree lazy normalize ~1470 行）、WS5-INV（47 gaps/106h 优先级）、WS1-PORT-CRLF（hitCRLF + CRLF bridge +11 测试）、WS3-QA（IntervalTreeTests 13 + PerfTests 7）、WS4-PORT-Core（Cursor Stage 0 骨架 +25 测试）、IntervalTree-StackFix（迭代化 + xunit 禁用并行）、WS5-PORT（共享 Harness +44 测试）、WS5-QA（首批高风险测试 44+1 skip）。 | 参见各 WS handoff 文件：`WS1-PORT-SearchCore-Result.md`, `WS2-PORT-Result.md`, `WS3-PORT-Tree-Result.md`, `WS5-INV-TestBacklog.md`, `WS1-PORT-CRLF-Result.md`, `WS3-QA-Result.md`, `WS4-PORT-Core-Result.md`, `WS5-PORT-Harness-Result.md`, `WS5-QA-Result.md` | `export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (585/585, 1 skip, 62s) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-26-sprint04-r1-r11`](../../agent-team/indexes/README.md#delta-2025-11-26-sprint04-r1-r11)。Sprint 04 M0/M1 里程碑达成，后续 WS4-PORT-Collection/Snippet 计划中。 |
| 2025-11-26 | <a id="aa4-cl7-gap"></a>AA4-CL7-Gap | DocMaintainer Run R42 reclassified AA4 CL7 (cursor/word/snippet stack) items as open gaps: Task Board + TestMatrix entries downgraded to "Gap" with owners redirected to the AA4-003 blueprint while awaiting new `#delta-2025-11-26-aa4-cl7-*` drops. | [`docs/reports/audit-checklist-aa4.md#cl7`](../../docs/reports/audit-checklist-aa4.md#cl7)<br>[`agent-team/task-board.md`](../../agent-team/task-board.md)<br>[`tests/TextBuffer.Tests/TestMatrix.md`](../../tests/TextBuffer.Tests/TestMatrix.md)<br>[`agent-team/handoffs/AA4-003-Audit.md`](../../agent-team/handoffs/AA4-003-Audit.md) | Documentation update – DocMaintainer log (`AGENTS.md`/`docs/sprints/sprint-03.md#r42`) | Y | Changefeed placeholder [`agent-team/indexes/README.md#delta-2025-11-26-aa4-cl7-cursor-core`](../../agent-team/indexes/README.md#delta-2025-11-26-aa4-cl7-cursor-core); use this row before editing CL7 status text. |
| 2025-11-26 | <a id="aa4-cl8-gap"></a>AA4-CL8-Gap | Same R42 pass captured unresolved DocUI/Markdown/Intl gaps under CL8: Markdown renderer still lacks search decoration ingestion + capture metadata/Intl segmenter wiring, so Task Board CL8 rows remain blocked pending `#delta-2025-11-26-aa4-cl8-*` deliveries. | [`docs/reports/audit-checklist-aa4.md#cl8`](../../docs/reports/audit-checklist-aa4.md#cl8)<br>[`agent-team/task-board.md`](../../agent-team/task-board.md)<br>[`docs/sprints/sprint-03.md#r42`](../../docs/sprints/sprint-03.md#r42) | Documentation update – DocMaintainer log (`AGENTS.md` update on 2025-11-26) | Y | Changefeed placeholder [`agent-team/indexes/README.md#delta-2025-11-26-aa4-cl8-markdown`](../../agent-team/indexes/README.md#delta-2025-11-26-aa4-cl8-markdown); cite this row before marking CL8 work complete. |
| 2025-11-27 | <a id="build-warnings"></a>BUILD-WARNINGS | Cleared the `dotnet build` warning backlog: removed unreachable snapshot code, exercised previously unused theory parameters/helpers, tightened PieceTree harness diagnostics, and downgraded IDE0005 severity via `.editorconfig` so builds remain actionable without XML docs. | [`tests/TextBuffer.Tests/Helpers/SnapshotTestUtils.cs`](../../tests/TextBuffer.Tests/Helpers/SnapshotTestUtils.cs)<br>[`tests/TextBuffer.Tests/IntervalTreeTests.cs`](../../tests/TextBuffer.Tests/IntervalTreeTests.cs)<br>[`tests/TextBuffer.Tests/PieceTreeBufferApiTests.cs`](../../tests/TextBuffer.Tests/PieceTreeBufferApiTests.cs)<br>[`tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs`](../../tests/TextBuffer.Tests/DocUI/DocUIFindDecorationsTests.cs)<br>[`tests/TextBuffer.Tests/Helpers/PieceTreeBufferAssertions.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeBufferAssertions.cs)<br>[`tests/TextBuffer.Tests/Helpers/PieceTreeFuzzHarness.cs`](../../tests/TextBuffer.Tests/Helpers/PieceTreeFuzzHarness.cs)<br>[`tests/TextBuffer.Tests/TextModelSearchTests.cs`](../../tests/TextBuffer.Tests/TextModelSearchTests.cs)<br>[`tests/TextBuffer.Tests/TextModelIndentationTests.cs`](../../tests/TextBuffer.Tests/TextModelIndentationTests.cs)<br>[`tests/TextBuffer.Tests/TextBuffer.Tests.csproj`](../../tests/TextBuffer.Tests/TextBuffer.Tests.csproj)<br>[`.editorconfig`](../../.editorconfig) | `dotnet build` (0 warnings)<br>`export PIECETREE_DEBUG=0 && dotnet test tests/TextBuffer.Tests/TextBuffer.Tests.csproj --nologo` (639 passed, 2 skipped, 0 failed) | Y | Changefeed anchor [`agent-team/indexes/README.md#delta-2025-11-27-build-warnings`](../../agent-team/indexes/README.md#delta-2025-11-27-build-warnings); resolves the 10 analyzer warnings surfaced in the build log. |
