# Migration Log & Changefeed Checklist

Purpose: capture every PieceTree porting milestone plus its Info-Indexer changefeed delta at `agent-team/indexes/README.md#delta-2025-11-19`, giving AGENTS / Sprints / Task Board editors one audit trail before they update status text.

## How to Append Entries
1. Log the date and Task/Subtask ID exactly as shown on the Task Board.
2. Summarize the delta and cite the concrete files or sections touched using Markdown links (relative paths only).
3. Record the validation evidence (e.g., `dotnet test` command, review notes) and link to the log or README section proving the run.
4. Mark **Changefeed Entry?** = Y only after the update is registered under `agent-team/indexes/README.md#delta-2025-11-19`, and point to that delta inside the Notes column.
5. Future edits to AGENTS / Sprints / Task Board must reference both the relevant row in this table and the matching changefeed entry before saving.

| Date | Task ID | Summary | Key Files | Tests/Validation | Changefeed Entry? (Y/N) | Notes |
| --- | --- | --- | --- | --- | --- | --- |
| 2025-11-19 | PT-003 | Expanded TS↔C# mappings for Piece/PieceTree/SearchContext/BufferRange. | [`agent-team/type-mapping.md`](../../agent-team/type-mapping.md)<br>[`ts/src/vs/editor/common/model/pieceTreeTextBuffer`](../../ts/src/vs/editor/common/model/pieceTreeTextBuffer) | Planner + Info-Indexer review noted in [`agent-team/type-mapping.md`](../../agent-team/type-mapping.md). | Y | Delta recorded at [`agent-team/indexes/README.md#delta-2025-11-19`](../../agent-team/indexes/README.md#delta-2025-11-19); Sprint 00 log cites this row. |
| 2025-11-19 | PT-004.G1 | Wired `PieceTreeBuilder` → `PieceTreeModel` → `PieceTreeBuffer` skeleton with RB helpers. | [`src/PieceTree.TextBuffer/Core`](../../src/PieceTree.TextBuffer/Core)<br>[`src/PieceTree.TextBuffer/README.md#porting-log`](../../src/PieceTree.TextBuffer/README.md#porting-log) | `dotnet test PieceTree.TextBuffer.Tests/PieceTree.TextBuffer.Tests.csproj` logged in [`src/PieceTree.TextBuffer/README.md#porting-log`](../../src/PieceTree.TextBuffer/README.md#porting-log). | Y | Changefeed proof at [`agent-team/indexes/README.md#delta-2025-11-19`](../../agent-team/indexes/README.md#delta-2025-11-19); Porting Log cross-references. |
| 2025-11-19 | PT-005.G1 | Established QA matrix + 7 Fact baseline across plain/CRLF/multi-chunk cases. | [`src/PieceTree.TextBuffer.Tests/TestMatrix.md`](../../src/PieceTree.TextBuffer.Tests/TestMatrix.md)<br>[`src/PieceTree.TextBuffer.Tests/UnitTest1.cs`](../../src/PieceTree.TextBuffer.Tests/UnitTest1.cs) | `dotnet test PieceTree.TextBuffer.Tests/PieceTree.TextBuffer.Tests.csproj` results archived in [`src/PieceTree.TextBuffer.Tests/TestMatrix.md`](../../src/PieceTree.TextBuffer.Tests/TestMatrix.md). | Y | QA delta logged under [`agent-team/indexes/README.md#delta-2025-11-19`](../../agent-team/indexes/README.md#delta-2025-11-19) and referenced by the matrix. |
| 2025-11-19 | PT-004.LineInfra | Added `LineStartTable`/`LineStartBuilder`, threaded metadata through `ChunkBuffer`, and introduced `PieceTreeSearchCache` + cache hooks in `PieceTreeModel`. | [`src/PieceTree.TextBuffer/Core/LineStarts.cs`](../../src/PieceTree.TextBuffer/Core/LineStarts.cs)<br>[`src/PieceTree.TextBuffer/Core/ChunkBuffer.cs`](../../src/PieceTree.TextBuffer/Core/ChunkBuffer.cs)<br>[`src/PieceTree.TextBuffer/Core/PieceTreeModel.cs`](../../src/PieceTree.TextBuffer/Core/PieceTreeModel.cs)<br>[`src/PieceTree.TextBuffer/Core/PieceTreeSearchCache.cs`](../../src/PieceTree.TextBuffer/Core/PieceTreeSearchCache.cs) | `dotnet test PieceTree.TextBuffer.Tests/PieceTree.TextBuffer.Tests.csproj` (7/7) | N | Awaiting Info-Indexer changefeed entry for the new shims; reference this row plus future delta when updating PT-004 artifacts. |
| 2025-11-19 | PT-004.Positions | Added `TextPosition`, `PieceTreeBuffer.GetPositionAt/GetOffsetAt/GetLineLength/GetLineCharCode/GetCharCode`, and ported TS-inspired offset/position tests. | [`src/PieceTree.TextBuffer/TextPosition.cs`](../../src/PieceTree.TextBuffer/TextPosition.cs)<br>[`src/PieceTree.TextBuffer/Class1.cs`](../../src/PieceTree.TextBuffer/Class1.cs)<br>[`src/PieceTree.TextBuffer.Tests/UnitTest1.cs`](../../src/PieceTree.TextBuffer.Tests/UnitTest1.cs) | `dotnet test PieceTree.TextBuffer.Tests/PieceTree.TextBuffer.Tests.csproj` (10/10) | N | Needs Info-Indexer delta for the new prompt + TextPosition additions before task board updates; cite this row when editing PT-004 status. |
